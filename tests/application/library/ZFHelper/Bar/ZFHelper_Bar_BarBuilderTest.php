<?php
/**
 * Test class for ZFHelper_Bar_BarBuilder.
 * Generated by PHPUnit on 2010-07-14 at 11:00:39.
 */
class ZFHelper_Bar_BarBuilderTest extends ControllerTestCase {
    /**
     * @var ZFHelper_Bar_BarBuilder
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    public function setUp() {
        parent::setUp();
        $this->object = new ZFHelper_Bar_BarBuilder;
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    public function tearDown() {
    }

    public function testSetBar() {
    	
        $this->object->setBar(new ZFHelper_Bar_ControllerBar());
        $this->assertTrue($this->object->getBar() instanceof ZFHelper_Bar_HtmlClassBuilder );
    }

    public function testGetBar() {
    	
        $this->object->setBar(new ZFHelper_Bar_ControllerBar());
        $this->assertTrue($this->object->getBar() instanceof ZFHelper_Bar_HtmlClassBuilder );
    }

    /**
     * @expectedException Exception
     */
    public function testConstructBarEmptyConfigThrowsException() {
    	
        $this->object->setBar(new ZFHelper_Bar_ControllerBar());
        $this->object->constructBar(array());
    }

    public function testBasicBar() {
    	
        $args = array('type'=>'module','containerStyle'=>'dashboard');
        $this->object->setBar(new ZFHelper_Bar_ModuleBar());
        $result = $this->object->constructBar($args);
        $this->assertType('string',$result,'We expected a string as a result');
    }

    public function testBarModuleAcl() {
    	
        $args = array('type'=>'module','containerStyle'=>'dashboard');
        $this->object->setBar(new ZFHelper_Bar_ModuleBar());
        $result = $this->object->constructBar($args);
        $this->assertType('string',$result,'We expected a string as a result');
    }

    public function testBarAclIntegrationController() {
    	
        $args = array('type'=>'controller','destination'=>'curriculum','useText'=>true,'container'=>'<div class="%s">','containerStyle'=>'menuModule controller','containerCloseTag'=>'</div>');
        $this->object->setBar(new ZFHelper_Bar_ControllerBar());
        $result = $this->object->constructBar($args);
        $this->assertType('string',$result,'We expected a string as a result');
        $this->assertEquals(preg_match('/Create/i',$result),0,'We should not have a create icon');
    }

    public function testActionBarAcl() {
    	
        $args = array('type'=>'action','destination'=>array('module'=>'messages','controller'=>'view'));
        $this->object->setBar(new ZFHelper_Bar_ActionBar());
        $result = $this->object->constructBar($args);
        $this->assertType('string',$result,'We expected a string as a result');
    }
}
?>
